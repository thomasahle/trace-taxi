@import "tailwindcss";
@plugin "@tailwindcss/typography";

/*
 * CSS Organization:
 *
 * 1. @theme: Tailwind CSS 4 design tokens (colors, radius)
 * 2. :root & .dark: Custom CSS variables for specialized components
 *    - Font families (--font-display, --font-body, --font-mono)
 *    - Tool block colors (--tool-header-bg, etc.)
 *    - Status colors (--code-bg, --panel-hover, etc.)
 * 3. Base styles: Typography, body, code blocks
 * 4. Terminal styles: Specialized syntax highlighting (must remain custom)
 * 5. Syntax highlighting: Code block colors (must remain custom)
 * 6. Prose styles: Markdown rendering
 * 7. Utility classes: Glass morphism, backgrounds, animations
 *
 * Note: Many custom CSS variables (--text, --muted, --bg, --border-light)
 * are still used throughout component <style> blocks. Future work could
 * migrate these to Tailwind utilities, but they're kept for now to avoid
 * breaking changes.
 */

@theme {
  /* Yellow base color theme */
  --color-background: hsl(0 0% 100%);
  --color-foreground: hsl(0 0% 3.9%);

  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(0 0% 3.9%);

  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(0 0% 3.9%);

  --color-primary: hsl(47.9 95.8% 53.1%);
  --color-primary-foreground: hsl(26 83.3% 14.1%);

  --color-secondary: hsl(60 4.8% 95.9%);
  --color-secondary-foreground: hsl(24 9.8% 10%);

  --color-muted: hsl(60 4.8% 95.9%);
  --color-muted-foreground: hsl(25 5.3% 44.7%);

  --color-accent: hsl(60 4.8% 95.9%);
  --color-accent-foreground: hsl(24 9.8% 10%);

  --color-active: hsl(0 0% 88%);
  --color-active-foreground: hsl(24 9.8% 10%);

  --color-destructive: hsl(0 84.2% 60.2%);
  --color-destructive-foreground: hsl(60 9.1% 97.8%);

  --color-border: hsl(20 5.9% 90%);
  --color-input: hsl(20 5.9% 90%);
  --color-ring: hsl(47.9 95.8% 53.1%);

  --radius: 0.5rem;
}

:root {
  /* Font families */
  --font-display: "Bebas Neue", Impact, "Arial Black", sans-serif;
  --font-body:
    "Rubik", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  --font-mono: "JetBrains Mono", ui-monospace, "Cascadia Code", monospace;

  /* Tool block colors - light mode */
  --tool-header-bg: hsl(45 100% 95%);
  --tool-header-hover-bg: hsl(45 100% 92%);
  --text: hsl(0 0% 10%);
  --muted: hsl(0 0% 45%);
  --bg: hsl(0 0% 100%);
  --border-light: hsl(0 0% 85%);

  /* Todo and status colors - light mode */
  --code-bg: hsl(0 0% 98%);
  --panel-hover: hsl(0 0% 96%);
  --chip: hsl(0 0% 95%);
  --todo-in-progress-bg: hsl(45 100% 88%);
  --green: hsl(140 65% 42%);
  --yellow: hsl(45 100% 50%);
  --success: hsl(140 50% 90%);
}

.dark {
  --color-background: hsl(0 0% 9%);
  --color-foreground: hsl(0 0% 95%);

  --color-card: hsl(0 0% 12%);
  --color-card-foreground: hsl(0 0% 95%);

  --color-popover: hsl(0 0% 12%);
  --color-popover-foreground: hsl(0 0% 95%);

  --color-primary: hsl(47.9 95.8% 53.1%);
  --color-primary-foreground: hsl(26 83.3% 14.1%);

  --color-secondary: hsl(0 0% 18%);
  --color-secondary-foreground: hsl(0 0% 95%);

  --color-muted: hsl(0 0% 15%);
  --color-muted-foreground: hsl(0 0% 65%);

  --color-accent: hsl(0 0% 18%);
  --color-accent-foreground: hsl(0 0% 95%);

  --color-active: hsl(0 0% 22%);
  --color-active-foreground: hsl(0 0% 95%);

  --color-destructive: hsl(0 62.8% 50.6%);
  --color-destructive-foreground: hsl(0 0% 98%);

  --color-border: hsl(0 0% 25%);
  --color-input: hsl(0 0% 18%);
  --color-ring: hsl(47.9 95.8% 53.1%);

  /* Tool block colors - dark mode */
  --tool-header-bg: hsl(45 80% 20%);
  --tool-header-hover-bg: hsl(45 80% 25%);
  --text: hsl(0 0% 95%);
  --muted: hsl(0 0% 60%);
  --bg: hsl(0 0% 12%);
  --border-light: hsl(0 0% 25%);

  /* Todo and status colors - dark mode */
  --code-bg: hsl(0 0% 8%);
  --panel-hover: hsl(0 0% 15%);
  --chip: hsl(0 0% 18%);
  --todo-in-progress-bg: hsl(45 60% 25%);
  --green: hsl(140 65% 65%);
  --yellow: hsl(45 100% 60%);
  --success: hsl(140 40% 25%);
}

* {
  @apply border-border;
}

/* Custom utilities for active state */
.bg-active {
  background-color: var(--color-active);
}

.text-active-foreground {
  color: var(--color-active-foreground);
}

body {
  @apply bg-background text-foreground font-sans;
  margin: 0;
  font-family: var(--font-body);
  font-size: 14px;
  line-height: 1.5;
}

html,
body,
#app {
  height: 100%;
}

/* Terminal styles - keep custom for specialized display */
.terminal {
  background: hsl(0 0% 98%);
  color: hsl(0 0% 25%);
  border: 1px solid hsl(0 0% 90%);
  border-radius: 6px;
  padding: 12px;
  font-family: var(--font-mono);
  font-size: 12px;
  line-height: 1.5;
  overflow-x: auto;
}

.dark .terminal {
  background: hsl(0 0% 8%);
  color: hsl(0 0% 75%);
  border: 1px solid hsl(0 0% 20%);
}

.terminal .cmd {
  color: hsl(207 85% 40%);
  font-weight: 500;
}

.dark .terminal .cmd {
  color: hsl(207 100% 70%);
}

.terminal .output {
  color: inherit;
}

.terminal .stderr {
  color: hsl(0 85% 60%);
}

.dark .terminal .stderr {
  color: hsl(0 85% 70%);
}

.terminal .exit-ok {
  color: hsl(140 65% 42%);
}

.dark .terminal .exit-ok {
  color: hsl(140 65% 65%);
}

.terminal .exit-bad {
  color: hsl(0 85% 60%);
}

.dark .terminal .exit-bad {
  color: hsl(0 85% 70%);
}

/* Diff styles - keep custom for specialized display */
.diff {
  font-family: var(--font-mono);
  font-size: 12px;
  line-height: 1.5;
  @apply bg-muted border border-border rounded-md overflow-hidden;
}

.diff-header {
  @apply bg-muted px-3 py-2 font-semibold border-b border-border;
}

.diff-body {
  font-family: var(--font-mono);
  font-size: 12px;
}

.diff-line {
  display: block;
  padding: 2px 12px;
  white-space: pre;
}

.diff-line.add {
  background: #ccffd8;
  color: #1a7f37;
}

.dark .diff-line.add {
  background: hsl(140 40% 20%);
  color: hsl(140 70% 70%);
}

.diff-line.del {
  background: #ffd7d5;
  color: #d1242f;
}

.dark .diff-line.del {
  background: hsl(0 40% 20%);
  color: hsl(0 70% 70%);
}

.diff-line.hdr {
  @apply bg-muted text-muted-foreground;
}

/* Code blocks */
pre,
code {
  font-family: var(--font-mono);
  font-size: 12px;
}

code {
  @apply px-1 py-0.5 rounded;
}

pre {
  @apply bg-muted border border-border rounded-md p-3 overflow-x-auto;
  margin: 0;
}

/* Syntax highlighting overrides for dark mode */
.dark .hljs {
  background: var(--code-bg);
  color: hsl(0 0% 85%);
}

.dark .hljs-keyword,
.dark .hljs-selector-tag,
.dark .hljs-built_in,
.dark .hljs-name,
.dark .hljs-tag {
  color: hsl(330 100% 70%);
}

.dark .hljs-string,
.dark .hljs-title,
.dark .hljs-section,
.dark .hljs-attribute,
.dark .hljs-literal,
.dark .hljs-template-tag,
.dark .hljs-template-variable,
.dark .hljs-type {
  color: hsl(95 38% 62%);
}

.dark .hljs-comment,
.dark .hljs-quote {
  color: hsl(0 0% 50%);
  font-style: italic;
}

.dark .hljs-number,
.dark .hljs-regexp,
.dark .hljs-variable,
.dark .hljs-attr {
  color: hsl(207 82% 66%);
}

.dark .hljs-function,
.dark .hljs-class .hljs-title {
  color: hsl(29 54% 61%);
}

.dark .hljs-meta {
  color: hsl(0 0% 60%);
}

/* Prose typography overrides */
.prose {
  color: var(--color-foreground);
  max-width: none;
}

.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  color: var(--color-foreground);
  font-family: var(--font-body);
  font-weight: 600;
}

/* General headings */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-display);
  letter-spacing: 0.02em;
}

.prose strong {
  color: var(--color-foreground);
  font-weight: 600;
}

.prose code {
  color: var(--color-foreground);
}

.prose a {
  color: var(--color-primary);
}

.prose blockquote {
  color: var(--color-muted-foreground);
  border-left-color: var(--color-border);
}

.prose ul,
.prose ol {
  color: var(--color-foreground);
}

/* Utilities */
.hidden {
  display: none;
}

.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Animations */
@keyframes slide-up {
  from {
    opacity: 0;
    transform: translate(-50%, 1.25rem);
  }

  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

/* Glass morphism utilities */
.bg-glass {
  background-color: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

.dark .bg-glass {
  background-color: rgba(0, 0, 0, 0.5);
}

.bg-glass-heavy {
  background-color: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

.dark .bg-glass-heavy {
  background-color: rgba(0, 0, 0, 0.9);
}

/* Background utilities */
.bg-taxi {
  background-image: url("/white-taxi.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
}

.dark .bg-taxi {
  background-image: url("/black-taxi.png");
}

/* Main content backdrop utility - only in light mode */
.main-backdrop {
  background-color: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.dark .main-backdrop {
  background-color: transparent;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

/* Header glass variant with more opacity */
.bg-glass-header {
  background-color: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

.dark .bg-glass-header {
  background-color: rgba(0, 0, 0, 0.8);
}
